SIZES
        entries   bytes used
vertexes: 896  7168
segs:    1371  27420

CURRENT TODO
  FRAME 1595 z a bit different

PROBLEMS/IMPROVEMENTS
? why was there a 0 allocation (might be e1m1 marker etc?)
- mobj has a subsector num, but its mostly used to retrieve secnum, save that instead or as well?
- sector mobjlists kinda suck (potentially spread across many pages).. not a big deal?
- thinkercap/thinker list kinda sucks (potentially spread across many pages)
- linebuffer is pointers, not offsets.
- secs has frontsecnum and backsecnum as well as pointer to line which has this. Reduce memory footprint by removing these?
- maybe invalidate memory when paged out (all ff or something)

- blocklinks is 2000 size. Figure out a more proper number?
- how big should thinkerlist be? move to heap?


 - Z_LoadValue(pass ref and offset and pointer, get the value? interally does a temp page in, puts val in pointer, temp page out? READ ONLY)

 - use wolf 3d conventional memory code for 16 bit mode?
 ? replace subsectors with just the values? currently 32 vs 48 bit... problematic...


... EVENTUALLY TODO
 - save file stuff (archive, unarchive thinkers)
 - titlepic stuff



MEMORY IDEAS
 - segs to conventional after all?
 sector->special from short to char ( 8 bit)
 thinker-> function to a char  (8 bit)

 
  
DEBUG
 - timedemo demo 3 with 12 pages:
  - 12 is a little off. 12% instead of 14% health at the end
    - figure that out. when is damage dealt, work back, figure out player position and random seed
    - segs out of EMS potentially...?


 - braintargets[braintargeton]
 - find all uses of P_SpawnMobj
 - P_BlockThingsIterator
    - consider this in a static spot...

2 sectors to sector refs, etc?


sound originRef thing...
 - needs ref, x, y
  ? maybe inner takes x/y and you can pass in null for the degen case
 
 
NOW (fix memory issues)

  ? change mobj-> player to a memref?
   ? is player z_malloced?
   - make it static, etc... then a pointer is ok
    - change linebuffer into indices instead of real pointers.
     - and all uses
^^^^ HERE
  - then 3
 
 - THEN all wad lumps to ems

 
- segs, etc to ems
 (line first?)



TODO vileobj pointer (and test)
TODO test braintargets
? change crossbspnode etc to use indices not addressesma


IDEA: 
  x move other memrefs out to static byte arrays. like maybe segs. see if it crashes then
    x didnt work
  - try to store copy of nodes, etc before page out then again in page in? or after game start and during render?
    - does it change? 
      - nodes: no
      ? vertexes?
  - (remember to move demo back)

 


